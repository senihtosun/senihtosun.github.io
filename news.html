<!DOCTYPE html>
<html>
<head>
    <title>Capital One Challenge</title>
    <link rel="stylesheet" href="style.css">
    <!-- SKELETON CSS LIBRARY FOR DESIGN-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css" integrity="sha512-EZLkOqwILORob+p0BXZc+Vm3RgJBOe1Iq/0fiI7r/wJgzOFZMlsqTa29UEl6v6U6gsV4uIpsNZoV32YZqrCRCQ==" crossorigin="anonymous" />
</head>

<body>

    <h1>News API</h1>

    <form class='search' action=''>
        <input class='input' type='text'/><br>
        <input type='submit'/> 
    </form>

    <div class='container'>
        <u1 class='class-list'></u1>
    </div>

</body>

<script>
  const inputForm = document.querySelector('.search');
const input = document.querySelector('.input');
const newsDiv = document.querySelector('.class-list');
const proxyUrl = 'https://cors-anywhere.herokuapp.com/';

// API key to access the API
const apiKey = '5f37f5eba1f745b8b909f01ad922c359';


inputForm.addEventListener('submit', retrieveData);

function retrieveData(e){

    // To prevent page from refreshing after form submission
    e.preventDefault();

    // The Category entered by the user
    let category = input.value;

    // Url to fetch the data by providing a category from the API
    let url = `${proxyUrl}http://newsapi.org/v2/top-headlines?country=us&category=${category}&apiKey=${apiKey}`;

    const request = new Request(url);

    fetch(request).then(res => res(json()))
    .then(data => console.log(data));

    console.log(category);
}

</script>

</html>
